# Mission100 비용 비교 분석: Firebase vs Supabase

## 🎯 시나리오: 한국 타게팅 + 글로벌 출시

**목표 시장**:
- 🇰🇷 한국 (주요 타겟)
- 🌍 영어권 (미국, 영국, 캐나다, 호주 등)

---

## 💰 결제 수수료 상세 비교

### Google Play Billing (현재 시스템)

#### 수수료 구조 (2024년 기준)
```
연 매출 $1M 이하:
├─ 처음 $1M: 15%
└─ $1M 초과분: 30%

🎉 소규모 개발자 혜택:
- 연 매출 $100만 이하는 15% 고정
- Mission100은 당분간 15% 적용 가능
```

#### 실제 수수료 계산
```
구독 상품: ₩9,900 (월간)

사용자 결제: ₩9,900
Google 수수료 (15%): ₩1,485
실제 수령액: ₩8,415 (85%)

📊 사용자 1,000명 기준:
- 총 결제액: ₩9,900,000
- Google 수수료: ₩1,485,000
- 순수익: ₩8,415,000
```

#### 추가 비용
```
✅ 무료:
- 결제 처리 인프라
- 보안 (PCI DSS 인증 불필요)
- 사기 방지 시스템
- 환불 처리
- 영수증 검증
- 다국가 통화 지원
- VAT/세금 처리

⚠️ 제약:
- Play Store 정책 준수 필수
- Google 심사 통과 필요
- 30% 수수료 (연 $1M 초과 시)
```

---

### Stripe (Supabase 사용 시)

#### 수수료 구조
```
기본 수수료:
├─ 카드 결제: 2.9% + ₩350
├─ 해외 카드: 3.9% + ₩350
└─ 통화 변환: +1%

구독 관리:
└─ 추가 비용 없음 (기본 포함)
```

#### 실제 수수료 계산 (한국)
```
구독 상품: ₩9,900 (월간)

사용자 결제: ₩9,900
Stripe 수수료: ₩637 (2.9% + ₩350)
실제 수령액: ₩9,263 (93.6%)

📊 사용자 1,000명 기준:
- 총 결제액: ₩9,900,000
- Stripe 수수료: ₩637,000
- 순수익: ₩9,263,000
```

#### 실제 수수료 계산 (미국)
```
구독 상품: $9.99 (월간)

사용자 결제: $9.99
Stripe 수수료: $0.59 (2.9% + $0.30)
실제 수령액: $9.40 (94.1%)

📊 사용자 1,000명 기준:
- 총 결제액: $9,990
- Stripe 수수료: $590
- 순수익: $9,400
```

#### 추가 비용
```
✅ 포함:
- 결제 처리 인프라
- 구독 관리 시스템
- 웹훅 (자동화)
- 청구서 생성
- 다국가 통화 지원
- 대부분의 사기 방지

⚠️ 별도 비용:
- Stripe Radar (사기 방지 고급): 0.05%
- Stripe Billing (고급 기능): $0
- 환불 수수료: 수수료 환불 안됨
- PCI DSS 인증: 자체 구현 필요

🚨 중요 제약:
- Android 앱에서 Stripe 직접 사용은 Google Play 정책 위반!
- 웹에서만 사용 가능
```

---

## 🚨 중요: Google Play 정책

### 2024년 Google Play 결제 정책

```
❌ 금지 사항:
모바일 앱 내에서 외부 결제 시스템 사용 금지

"앱 내에서 구매되는 디지털 상품/서비스는
반드시 Google Play Billing을 사용해야 함"

위반 시:
├─ 앱 스토어 퇴출
├─ 개발자 계정 정지
└─ 법적 책임

✅ 허용 사항:
- 실물 상품 (티셔츠, 책 등)
- 실제 서비스 (택시, 배달 등)
- 웹사이트 구독 (앱 외부)
```

### 허용되는 하이브리드 전략

```
전략 1: 플랫폼 분리
├─ Android 앱: Google Play Billing (필수)
├─ iOS 앱: Apple In-App Purchase (필수)
└─ 웹사이트: Stripe 사용 가능 ✅

전략 2: 가격 차별화
├─ 모바일 앱: ₩9,900 (수수료 포함)
└─ 웹사이트: ₩8,900 (수수료 낮음)
   → 사용자가 웹에서 구매하도록 유도
```

---

## 💡 하이브리드 시스템 설계

### 아키텍처: Firebase + Stripe (웹 전용)

```
┌─────────────────┐
│  Android 앱     │ → Google Play Billing (필수) 15%
└─────────────────┘

┌─────────────────┐
│   iOS 앱        │ → Apple IAP (필수) 15%
└─────────────────┘

┌─────────────────┐
│   웹사이트      │ → Stripe (선택) 2.9% + ₩350 ✅
└─────────────────┘
         ↓
┌─────────────────┐
│   Firebase      │ (공통 백엔드)
│   Firestore     │ (구독 상태 통합 관리)
└─────────────────┘
```

### 구현 방법

#### 1. Firebase에 결제 플랫폼 필드 추가
```javascript
// firestore: subscriptions 컬렉션
{
  userId: "user123",
  status: "active",
  platform: "google_play" | "apple_pay" | "stripe",

  // Google Play Billing
  googlePlaySubscriptionId: "GPA.1234...",

  // Stripe
  stripeCustomerId: "cus_abc123",
  stripeSubscriptionId: "sub_xyz789",

  productId: "premium_monthly",
  startDate: "2025-10-01",
  endDate: "2025-11-01",
}
```

#### 2. 웹사이트 구독 페이지
```html
<!-- https://mission100.app/subscribe -->
<div class="pricing">
  <div class="mobile-price">
    <h3>모바일 앱에서 구독</h3>
    <p class="price">₩9,900/월</p>
    <p class="note">Google Play / App Store</p>
  </div>

  <div class="web-price recommended">
    <span class="badge">10% 할인</span>
    <h3>웹에서 구독</h3>
    <p class="price">₩8,900/월</p>
    <p class="note">카드 결제 (Stripe)</p>
    <button>지금 구독하기</button>
  </div>
</div>
```

#### 3. 앱에서 웹 구독 유도
```dart
// lib/screens/subscription_screen.dart
Widget build(BuildContext context) {
  return Column(
    children: [
      // 기존 Google Play 구독
      SubscriptionCard(
        title: '앱에서 구독',
        price: '₩9,900/월',
        onTap: () => _purchaseWithGooglePlay(),
      ),

      SizedBox(height: 16),

      // 웹 구독 안내 (할인)
      Container(
        decoration: BoxDecoration(
          border: Border.all(color: Colors.green, width: 2),
        ),
        child: Column(
          children: [
            Text('💰 10% 할인'),
            Text('₩8,900/월'),
            ElevatedButton(
              onPressed: () => _launchWebSubscription(),
              child: Text('웹에서 할인받고 구독하기'),
            ),
            Text(
              '웹 브라우저에서 카드로 결제하세요',
              style: TextStyle(fontSize: 12, color: Colors.grey),
            ),
          ],
        ),
      ),
    ],
  );
}

void _launchWebSubscription() async {
  final url = 'https://mission100.app/subscribe?userId=${currentUser.id}';
  if (await canLaunchUrl(Uri.parse(url))) {
    await launchUrl(Uri.parse(url), mode: LaunchMode.externalBrowser);
  }
}
```

---

## 📊 시뮬레이션: 실제 비용 비교

### 시나리오 1: 모바일 앱 전용 (현재)

#### 사용자 분포
```
총 구독자: 10,000명
└─ Android (한국): 7,000명 → Google Play
└─ Android (미국): 2,000명 → Google Play
└─ iOS: 1,000명 → Apple IAP
```

#### 월간 수익 계산
```
한국 Android (₩9,900):
- 7,000명 × ₩9,900 = ₩69,300,000
- Google 수수료 (15%): -₩10,395,000
- 순수익: ₩58,905,000

미국 Android ($9.99):
- 2,000명 × $9.99 = $19,980
- Google 수수료 (15%): -$2,997
- 순수익: $16,983 (≈ ₩22,778,000)

iOS ($9.99):
- 1,000명 × $9.99 = $9,990
- Apple 수수료 (15%): -$1,498.5
- 순수익: $8,491.5 (≈ ₩11,389,000)

📊 총 순수익: ₩93,072,000/월 (약 $69,400)
📊 수수료: ₩14,890,500 (15%)
```

---

### 시나리오 2: 하이브리드 (모바일 + 웹 할인)

#### 사용자 분포 (웹 전환율 30% 가정)
```
총 구독자: 10,000명

모바일 앱 구독:
├─ Android (한국): 4,900명 → Google Play (₩9,900)
├─ Android (미국): 1,400명 → Google Play ($9.99)
└─ iOS: 700명 → Apple IAP ($9.99)

웹 구독 (할인):
├─ 웹 (한국): 2,100명 → Stripe (₩8,900)
└─ 웹 (미국): 900명 → Stripe ($8.99)
```

#### 월간 수익 계산
```
한국 Android (₩9,900):
- 4,900명 × ₩9,900 = ₩48,510,000
- Google 수수료 (15%): -₩7,276,500
- 순수익: ₩41,233,500

미국 Android ($9.99):
- 1,400명 × $9.99 = $13,986
- Google 수수료 (15%): -$2,097.9
- 순수익: $11,888.1 (≈ ₩15,945,000)

iOS ($9.99):
- 700명 × $9.99 = $6,993
- Apple 수수료 (15%): -$1,048.95
- 순수익: $5,944.05 (≈ ₩7,976,000)

웹 한국 (₩8,900):
- 2,100명 × ₩8,900 = ₩18,690,000
- Stripe 수수료 (2.9% + ₩350): -₩1,277,490
- 순수익: ₩17,412,510

웹 미국 ($8.99):
- 900명 × $8.99 = $8,091
- Stripe 수수료 (2.9% + $0.30): -$504.64
- 순수익: $7,586.36 (≈ ₩10,177,000)

📊 총 순수익: ₩92,744,010/월 (약 $69,150)
📊 평균 수수료: 14.1%

⚠️ 주의: 총 수익은 약간 감소 (-₩327,990)
   이유: 웹 할인으로 객단가 하락
```

---

### 시나리오 3: 웹 전환율 50% (적극적 유도)

#### 사용자 분포
```
총 구독자: 10,000명

모바일 앱 구독:
├─ Android (한국): 3,500명 → Google Play (₩9,900)
├─ Android (미국): 1,000명 → Google Play ($9.99)
└─ iOS: 500명 → Apple IAP ($9.99)

웹 구독 (할인):
├─ 웹 (한국): 3,500명 → Stripe (₩8,900)
└─ 웹 (미국): 1,500명 → Stripe ($8.99)
```

#### 월간 수익 계산
```
한국 Android (₩9,900):
- 3,500명 × ₩9,900 = ₩34,650,000
- Google 수수료 (15%): -₩5,197,500
- 순수익: ₩29,452,500

미국 Android ($9.99):
- 1,000명 × $9.99 = $9,990
- Google 수수료 (15%): -$1,498.5
- 순수익: $8,491.5 (≈ ₩11,389,000)

iOS ($9.99):
- 500명 × $9.99 = $4,995
- Apple 수수료 (15%): -$749.25
- 순수익: $4,245.75 (≈ ₩5,695,000)

웹 한국 (₩8,900):
- 3,500명 × ₩8,900 = ₩31,150,000
- Stripe 수수료 (2.9% + ₩350): -₩2,128,150
- 순수익: ₩29,021,850

웹 미국 ($8.99):
- 1,500명 × $8.99 = $13,485
- Stripe 수수료 (2.9% + $0.30): -$841.07
- 순수익: $12,643.93 (≈ ₩16,964,000)

📊 총 순수익: ₩92,522,350/월 (약 $68,980)
📊 평균 수수료: 13.6%

⚠️ 주의: 총 수익 감소 (-₩549,650)
   하지만 수수료 비율은 개선
```

---

## 💡 핵심 인사이트

### 1. 수수료율 vs 객단가 트레이드오프

```
모바일 전용:
✅ 높은 객단가 (₩9,900)
❌ 높은 수수료 (15%)
= 순수익: ₩93,072,000

하이브리드 (웹 30%):
❌ 낮은 평균 객단가 (할인)
✅ 낮은 평균 수수료 (14.1%)
= 순수익: ₩92,744,010 (-0.35%)

결론: 할인을 제공하면 수수료는 절약되지만
     총 수익은 오히려 감소!
```

### 2. 웹 전환의 실제 효과

```
수수료 절감액 (웹 전환 30%):
- 절감: ₩848,010/월

수익 감소액 (할인):
- 손실: -₩1,175,990/월

순효과: -₩327,980/월 ❌

🎯 핵심: 웹 전환으로 수수료는 줄지만
        할인으로 인한 수익 감소가 더 큼!
```

### 3. 웹 할인 없이 동일 가격 유지하면?

#### 시나리오 4: 웹도 ₩9,900 (할인 없음)

```
웹 한국 (₩9,900):
- 2,100명 × ₩9,900 = ₩20,790,000
- Stripe 수수료 (2.9% + ₩350): -₩1,337,910
- 순수익: ₩19,452,090

웹 미국 ($9.99):
- 900명 × $9.99 = $8,991
- Stripe 수수료 (2.9% + $0.30): -$530.74
- 순수익: $8,460.26 (≈ ₩11,348,000)

📊 웹 전환 30% + 동일 가격:
총 순수익: ₩95,954,590 (+₩2,882,590) ✅

🎉 이제 모바일 전용보다 수익 증가!
   수수료 절감 효과가 제대로 나타남
```

---

## 📈 최적 전략 분석

### 전략 A: 모바일 전용 (현재)
```
장점:
✅ 단순한 구조
✅ Google/Apple 신뢰도
✅ 자동 구독 관리
✅ 앱 스토어 노출

단점:
❌ 15% 고정 수수료
❌ Google/Apple 정책 의존
❌ 웹 사용자 놓침

순수익: ₩93,072,000/월
추가 개발: 0원
```

### 전략 B: 하이브리드 + 동일 가격
```
장점:
✅ 수수료 절감 (평균 13.2%)
✅ 웹 사용자 확보
✅ 결제 수단 다양화
✅ Google 의존도 감소

단점:
❌ 복잡한 구조 (2개 시스템)
❌ 웹사이트 개발 필요
❌ Stripe 연동 작업
❌ 구독 통합 관리 복잡

순수익: ₩95,954,590/월 (+3.1%)
추가 개발: ~₩20,000,000 (일회성)

투자 회수: 7개월
```

### 전략 C: 하이브리드 + 웹 할인
```
장점:
✅ 웹 전환율 높임
✅ 사용자 선택권
✅ 마케팅 포인트

단점:
❌ 수익 감소 위험
❌ 가격 차별 혼란
❌ 앱 스토어 정책 리스크
   (Google은 가격 차별 금지 가능)

순수익: ₩92,744,010/월 (-0.35%)
추가 개발: ~₩20,000,000

투자 회수: 불가 ❌
```

---

## 🎯 제 최종 추천

### 1단계: 모바일 전용 유지 (현재 ~ 6개월)
```
이유:
✅ 단순성 > 수수료 절감
✅ 시장 검증 우선
✅ 사용자 확보에 집중

목표:
- 구독자 1만명 달성
- 이탈률 < 5%
- NPS 점수 > 50
```

### 2단계: 웹 론칭 평가 (6개월 후)
```
평가 기준:
1. 웹 통계 페이지 요청 > 20%
2. 월 순수익 > ₩50,000,000
3. Firebase 비용 > ₩5,000,000/월

만족 시:
→ 하이브리드 전환 (동일 가격)
→ 투자 회수 7개월
```

### 3단계: 하이브리드 구현 (조건 충족 시)
```
구현 방식:
1. Firebase 백엔드 유지 ✅
2. Stripe 웹 결제 추가
3. 가격: 동일 유지 (₩9,900)
4. 마케팅: "웹에서도 결제 가능"

예상 효과:
✅ 수수료 13.2% (vs 15%)
✅ 월 +₩2,800,000 수익 증가
✅ 7개월 투자 회수
```

---

## 🚨 중요 주의사항

### Google Play 정책 준수

```
✅ 허용:
- 웹사이트에서 Stripe 결제
- 웹 구독 후 앱에서 사용
- 동일 가격 유지

❌ 금지:
- 앱에서 "웹이 더 싸요" 명시
- 앱에서 Stripe 직접 결제
- 앱에서 웹으로 리다이렉트 (구매 목적)

⚠️ 회색지대:
- 앱에서 "웹에서도 구독 가능" 안내
  → 조심스럽게 표현 필요
  → "웹사이트 방문하기" 정도만
```

### 2024년 Google 정책 변경 예고
```
🔮 예상 변경 사항:
- 외부 결제 링크 허용 (수수료 26%)
- 사용자 선택권 확대
- 반독점 규제 대응

하지만:
- 아직 시행 안됨
- 국가별 다름
- 계속 모니터링 필요
```

---

## 💰 백엔드 비용 비교

### Firebase (현재)
```
사용자 10,000명 기준:

Firestore:
- 읽기: 50,000,000/월 → $18
- 쓰기: 10,000,000/월 → $27
- 저장: 50GB → $9

Authentication:
- 무료 (SMS 인증 별도)

Cloud Functions:
- 1,000,000 호출 → $8

총 백엔드 비용: $62/월 (≈ ₩83,000)
```

### Supabase + Stripe
```
사용자 10,000명 기준:

Supabase Pro:
- 기본 플랜: $25/월
- 데이터베이스: 8GB 포함 (충분)
- Edge Functions: 500,000 호출 포함
- 초과분: ~$15/월

Stripe:
- 계정 유지: $0
- 트랜잭션만 수수료

총 백엔드 비용: $40/월 (≈ ₩54,000)

절감: ₩29,000/월 (35% 저렴)
```

### 비용 차이 시뮬레이션
```
연간 백엔드 비용:
- Firebase: ₩996,000/년
- Supabase: ₩648,000/년
- 절감: ₩348,000/년

하지만:
- Supabase 마이그레이션: ₩10,000,000
- 투자 회수: 28년 ❌

결론: 백엔드 비용 차이는 미미함
     수수료 절감이 핵심!
```

---

## 📊 최종 비교표

| 항목 | 모바일 전용 | 하이브리드 (동일가) | 하이브리드 (할인) |
|------|------------|-------------------|------------------|
| **월 순수익** | ₩93,072,000 | ₩95,954,590 | ₩92,744,010 |
| **평균 수수료** | 15.0% | 13.2% | 14.1% |
| **백엔드 비용** | ₩83,000 | ₩83,000 | ₩54,000 |
| **개발 비용** | ₩0 | ₩20,000,000 | ₩25,000,000 |
| **복잡도** | ⭐ | ⭐⭐⭐ | ⭐⭐⭐⭐ |
| **정책 리스크** | 없음 | 낮음 | 중간 |
| **투자 회수** | - | 7개월 | 불가 |
| **추천도** | ⭐⭐⭐⭐ | ⭐⭐⭐⭐⭐ | ⭐⭐ |

---

## 🎯 결론 및 추천

### Phase 1: 현재 (출시 ~ 6개월)
```
✅ Firebase + Google Play Billing 유지
✅ iOS 버전 개발 (더 높은 ROI)
✅ 사용자 확보 및 피드백
✅ 시장 검증

이유:
- 단순성이 성장기에 중요
- 15% 수수료는 수용 가능
- 초기에는 개발 속도 > 수수료 절감
```

### Phase 2: 성장기 (6개월 ~ 1년)
```
조건 충족 시 하이브리드 전환:
✅ 구독자 10,000명 이상
✅ 월 순수익 ₩50M 이상
✅ 웹 요청 > 20%

구현:
1. Firebase 백엔드 유지
2. 웹사이트 + Stripe 추가
3. 동일 가격 (₩9,900)
4. 7개월 후 투자 회수

예상 효과:
- 월 +₩2.8M 추가 수익
- 수수료 15% → 13.2%
- 웹 사용자 확보
```

### Phase 3: 확장기 (1년 이후)
```
글로벌 확장:
✅ 미국/유럽 마케팅 강화
✅ 다국어 지원 확대
✅ 현지화 가격 정책

백엔드 재평가:
- Firebase 비용 > ₩5M/월 시
- Supabase 전환 검토
- 하지만 당분간 불필요
```

---

## 💬 FAQ

### Q1: Stripe만 사용하면 안되나요?
```
A: ❌ 불가능합니다.

Android 앱에서 디지털 상품 판매 시
Google Play Billing 사용이 법적 필수입니다.

Stripe는 웹에서만 사용 가능합니다.
```

### Q2: 웹 가격을 더 낮게 하면?
```
A: ⚠️ 위험합니다.

1. Google Play 정책 위반 가능
2. 앱 스토어 퇴출 리스크
3. 실제 수익 감소 (시뮬레이션 참고)

권장: 동일 가격 유지
```

### Q3: 언제 Supabase로 전환하나요?
```
A: 다음 조건 중 2개 이상 충족 시

1. Firebase 비용 > ₩5M/월
2. 웹 사용자 > 50%
3. 복잡한 SQL 쿼리 필요
4. 자체 서버 구축 필요

현재로서는 불필요합니다.
```

### Q4: iOS는 어떻게 하나요?
```
A: iOS도 동일한 구조입니다.

- iOS 앱: Apple In-App Purchase (15%)
- 웹사이트: Stripe (2.9%)

Apple도 Google과 같은 정책입니다.
```

---

**최종 추천**:
1. 🏆 **단기 (0-6개월)**: Firebase + Google Play 유지, iOS 개발
2. 🎯 **중기 (6-12개월)**: 조건 충족 시 웹 + Stripe 추가 (동일 가격)
3. 🚀 **장기 (1년+)**: 글로벌 확장, 필요 시 Supabase 검토

**핵심**: 수수료 절감보다 **사용자 확보**와 **제품 완성도**가 먼저입니다! 💡

---

**문서 버전**: 1.0.0
**최종 업데이트**: 2025-10-01
**작성자**: Mission100 개발팀
