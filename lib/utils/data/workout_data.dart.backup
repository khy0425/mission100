import '../../models/user_profile.dart';
import '../../models/exercise_type.dart';
import 'package:flutter/material.dart';

/// 운동 세트 정보
class ExerciseSet {
  final ExerciseType type;
  final int reps;

  const ExerciseSet({required this.type, required this.reps});
}

/// 일일 운동 프로그램
class DailyWorkout {
  final List<int> sets;
  final int restTimeSeconds;

  const DailyWorkout({
    required this.sets,
    this.restTimeSeconds = 90,
  });

  /// 총 횟수
  int get totalReps => sets.fold(0, (sum, reps) => sum + reps);

  /// ExerciseSet 리스트로 변환
  List<ExerciseSet> toSets() {
    return sets
        .map((reps) => ExerciseSet(type: ExerciseType.pushup, reps: reps))
        .toList();
  }

  /// 총 횟수 (하위 호환성)
  int getTotalReps() => totalReps;
}

/// 14주 Push-up 프로그램 데이터
///
/// 과학적 근거: Calatayud J, et al. (2017). IJERPH. 14(5):358
///
/// 과학적 프로그레시브 오버로드 적용:
/// - Rookie: 12 → 100 reps
/// - Rising: 18 → 120 reps
/// - Alpha: 30 → 150 reps
/// - Giga: 50 → 200 reps
class WorkoutData {
  /// 14주 워크아웃 프로그램 데이터
  /// Map<난이도, Map<주차, Map<요일, List<세트별 횟수>>>>
  static Map<UserLevel, Map<int, Map<int, List<int>>>> get workoutPrograms => {
        // 초급 레벨 (Rookie Chad) - 12 → 100 reps
        UserLevel.rookie: {
          1: {
            1: [0, 1, 1, 1, 1], // 총 4개
            2: [0, 1, 1, 1, 1], // 총 4개
            3: [0, 1, 1, 1, 1], // 총 4개
          },
          2: {
            1: [1, 1, 2, 2, 2], // 총 8개
            2: [1, 1, 2, 2, 2], // 총 8개
            3: [1, 2, 2, 2, 2], // 총 9개
          },
          3: {
            1: [2, 2, 2, 3, 3], // 총 12개
            2: [2, 2, 2, 3, 3], // 총 12개
            3: [2, 2, 3, 3, 3], // 총 13개
          },
          4: {
            1: [3, 3, 3, 3, 4], // 총 16개
            2: [3, 3, 3, 3, 4], // 총 16개
            3: [3, 3, 3, 3, 4], // 총 16개
          },
          5: {
            1: [3, 4, 4, 4, 4], // 총 19개
            2: [3, 4, 4, 4, 4], // 총 19개
            3: [3, 3, 3, 3, 4, 4], // 총 20개
          },
          6: {
            1: [3, 3, 4, 4, 4, 4], // 총 22개
            2: [3, 3, 4, 4, 4, 4], // 총 22개
            3: [3, 4, 4, 4, 4, 4], // 총 23개
          },
          7: {
            1: [4, 4, 4, 4, 4, 4], // 총 24개
            2: [4, 4, 4, 4, 4, 5], // 총 25개
            3: [4, 4, 4, 4, 4, 5], // 총 25개
          },
          8: {
            1: [4, 4, 4, 5, 5, 5], // 총 27개
            2: [4, 4, 4, 5, 5, 5], // 총 27개
            3: [4, 4, 4, 5, 5, 5], // 총 27개
          },
          9: {
            1: [4, 5, 5, 5, 5, 5], // 총 29개
            2: [4, 5, 5, 5, 5, 5], // 총 29개
            3: [4, 5, 5, 5, 5, 5], // 총 29개
          },
          10: {
            1: [5, 5, 5, 5, 5, 5], // 총 30개
            2: [5, 5, 5, 5, 5, 6], // 총 31개
            3: [5, 5, 5, 5, 5, 6], // 총 31개
          },
          11: {
            1: [5, 5, 5, 5, 5, 6], // 총 31개
            2: [5, 5, 5, 5, 6, 6], // 총 32개
            3: [5, 5, 5, 5, 6, 6], // 총 32개
          },
          12: {
            1: [5, 5, 5, 5, 6, 6], // 총 32개
            2: [5, 5, 5, 6, 6, 6], // 총 33개
            3: [5, 5, 5, 6, 6, 6], // 총 33개
          },
          13: {
            1: [5, 5, 5, 6, 6, 6], // 총 33개
            2: [5, 5, 5, 6, 6, 6], // 총 33개
            3: [5, 5, 5, 6, 6, 6], // 총 33개
          },
          14: {
            1: [5, 5, 5, 6, 6, 6], // 총 33개
            2: [5, 5, 5, 6, 6, 6], // 총 33개
            3: [5, 5, 6, 6, 6, 6], // 총 34개
          },
        },

        // 중급 레벨 (Rising Chad) - 18 → 120 reps
        UserLevel.rising: {
          1: {
            1: [1, 1, 1, 1, 2], // 총 6개
            2: [1, 1, 1, 1, 2], // 총 6개
            3: [1, 1, 1, 1, 2], // 총 6개
          },
          2: {
            1: [2, 2, 2, 2, 3], // 총 11개
            2: [2, 2, 2, 2, 3], // 총 11개
            3: [2, 2, 2, 2, 3], // 총 11개
          },
          3: {
            1: [3, 3, 3, 3, 3], // 총 15개
            2: [3, 3, 3, 3, 4], // 총 16개
            3: [3, 3, 3, 3, 4], // 총 16개
          },
          4: {
            1: [3, 3, 3, 3, 4, 4], // 총 20개
            2: [3, 3, 3, 3, 4, 4], // 총 20개
            3: [3, 3, 3, 3, 4, 4], // 총 20개
          },
          5: {
            1: [3, 4, 4, 4, 4, 4], // 총 23개
            2: [4, 4, 4, 4, 4, 4], // 총 24개
            3: [4, 4, 4, 4, 4, 4], // 총 24개
          },
          6: {
            1: [4, 4, 4, 5, 5, 5], // 총 27개
            2: [4, 4, 4, 5, 5, 5], // 총 27개
            3: [4, 4, 4, 5, 5, 5], // 총 27개
          },
          7: {
            1: [5, 5, 5, 5, 5, 5], // 총 30개
            2: [5, 5, 5, 5, 5, 5], // 총 30개
            3: [5, 5, 5, 5, 5, 5], // 총 30개
          },
          8: {
            1: [5, 5, 5, 5, 6, 6], // 총 32개
            2: [5, 5, 5, 6, 6, 6], // 총 33개
            3: [5, 5, 5, 6, 6, 6], // 총 33개
          },
          9: {
            1: [5, 6, 6, 6, 6, 6], // 총 35개
            2: [5, 6, 6, 6, 6, 6], // 총 35개
            3: [5, 6, 6, 6, 6, 6], // 총 35개
          },
          10: {
            1: [6, 6, 6, 6, 6, 6], // 총 36개
            2: [6, 6, 6, 6, 6, 7], // 총 37개
            3: [6, 6, 6, 6, 6, 7], // 총 37개
          },
          11: {
            1: [6, 6, 6, 6, 7, 7], // 총 38개
            2: [6, 6, 6, 6, 7, 7], // 총 38개
            3: [6, 6, 6, 7, 7, 7], // 총 39개
          },
          12: {
            1: [6, 6, 6, 7, 7, 7], // 총 39개
            2: [6, 6, 6, 7, 7, 7], // 총 39개
            3: [6, 6, 7, 7, 7, 7], // 총 40개
          },
          13: {
            1: [6, 6, 6, 7, 7, 7], // 총 39개
            2: [6, 6, 7, 7, 7, 7], // 총 40개
            3: [6, 6, 7, 7, 7, 7], // 총 40개
          },
          14: {
            1: [6, 6, 7, 7, 7, 7], // 총 40개
            2: [6, 6, 7, 7, 7, 7], // 총 40개
            3: [6, 6, 7, 7, 7, 7], // 총 40개
          },
        },

        // 고급 레벨 (Alpha Chad) - 30 → 150 reps
        UserLevel.alpha: {
          1: {
            1: [2, 2, 2, 2, 2], // 총 10개
            2: [2, 2, 2, 2, 2], // 총 10개
            3: [2, 2, 2, 2, 2], // 총 10개
          },
          2: {
            1: [3, 3, 3, 3, 4], // 총 16개
            2: [3, 3, 3, 3, 4], // 총 16개
            3: [3, 3, 3, 3, 4], // 총 16개
          },
          3: {
            1: [3, 3, 3, 4, 4, 4], // 총 21개
            2: [3, 3, 3, 4, 4, 4], // 총 21개
            3: [3, 3, 4, 4, 4, 4], // 총 22개
          },
          4: {
            1: [4, 4, 4, 4, 5, 5], // 총 26개
            2: [4, 4, 4, 4, 5, 5], // 총 26개
            3: [4, 4, 4, 5, 5, 5], // 총 27개
          },
          5: {
            1: [5, 5, 5, 5, 5, 5], // 총 30개
            2: [5, 5, 5, 5, 5, 6], // 총 31개
            3: [5, 5, 5, 5, 5, 6], // 총 31개
          },
          6: {
            1: [5, 6, 6, 6, 6, 6], // 총 35개
            2: [5, 6, 6, 6, 6, 6], // 총 35개
            3: [5, 6, 6, 6, 6, 6], // 총 35개
          },
          7: {
            1: [6, 6, 6, 6, 7, 7], // 총 38개
            2: [6, 6, 6, 6, 7, 7], // 총 38개
            3: [6, 6, 6, 7, 7, 7], // 총 39개
          },
          8: {
            1: [6, 7, 7, 7, 7, 7], // 총 41개
            2: [6, 7, 7, 7, 7, 7], // 총 41개
            3: [7, 7, 7, 7, 7, 7], // 총 42개
          },
          9: {
            1: [7, 7, 7, 7, 8, 8], // 총 44개
            2: [7, 7, 7, 7, 8, 8], // 총 44개
            3: [7, 7, 7, 7, 8, 8], // 총 44개
          },
          10: {
            1: [7, 7, 8, 8, 8, 8], // 총 46개
            2: [7, 7, 8, 8, 8, 8], // 총 46개
            3: [7, 8, 8, 8, 8, 8], // 총 47개
          },
          11: {
            1: [8, 8, 8, 8, 8, 8], // 총 48개
            2: [8, 8, 8, 8, 8, 8], // 총 48개
            3: [8, 8, 8, 8, 8, 8], // 총 48개
          },
          12: {
            1: [8, 8, 8, 8, 8, 9], // 총 49개
            2: [8, 8, 8, 8, 8, 9], // 총 49개
            3: [8, 8, 8, 8, 8, 9], // 총 49개
          },
          13: {
            1: [8, 8, 8, 8, 8, 9], // 총 49개
            2: [7, 7, 7, 7, 7, 7, 8], // 총 50개
            3: [7, 7, 7, 7, 7, 7, 8], // 총 50개
          },
          14: {
            1: [7, 7, 7, 7, 7, 7, 8], // 총 50개
            2: [7, 7, 7, 7, 7, 7, 8], // 총 50개
            3: [7, 7, 7, 7, 7, 7, 8], // 총 50개
          },
        },

        // 최고급 레벨 (Giga Chad) - 50 → 200 reps
        UserLevel.giga: {
          1: {
            1: [3, 3, 3, 3, 4], // 총 16개
            2: [3, 3, 3, 4, 4], // 총 17개
            3: [3, 3, 3, 4, 4], // 총 17개
          },
          2: {
            1: [4, 4, 4, 4, 4, 4], // 총 24개
            2: [4, 4, 4, 4, 4, 4], // 총 24개
            3: [4, 4, 4, 4, 4, 4], // 총 24개
          },
          3: {
            1: [5, 5, 5, 5, 5, 6], // 총 31개
            2: [5, 5, 5, 5, 5, 6], // 총 31개
            3: [5, 5, 5, 5, 5, 6], // 총 31개
          },
          4: {
            1: [6, 6, 6, 6, 6, 7], // 총 37개
            2: [6, 6, 6, 6, 6, 7], // 총 37개
            3: [6, 6, 6, 6, 6, 7], // 총 37개
          },
          5: {
            1: [7, 7, 7, 7, 7, 7], // 총 42개
            2: [7, 7, 7, 7, 7, 8], // 총 43개
            3: [7, 7, 7, 7, 7, 8], // 총 43개
          },
          6: {
            1: [7, 8, 8, 8, 8, 8], // 총 47개
            2: [8, 8, 8, 8, 8, 8], // 총 48개
            3: [8, 8, 8, 8, 8, 8], // 총 48개
          },
          7: {
            1: [7, 7, 7, 7, 8, 8, 8], // 총 52개
            2: [7, 7, 7, 7, 8, 8, 8], // 총 52개
            3: [7, 7, 7, 8, 8, 8, 8], // 총 53개
          },
          8: {
            1: [8, 8, 8, 8, 8, 8, 8], // 총 56개
            2: [8, 8, 8, 8, 8, 8, 8], // 총 56개
            3: [8, 8, 8, 8, 8, 8, 8], // 총 56개
          },
          9: {
            1: [8, 8, 8, 8, 9, 9, 9], // 총 59개
            2: [8, 8, 8, 8, 9, 9, 9], // 총 59개
            3: [8, 8, 8, 9, 9, 9, 9], // 총 60개
          },
          10: {
            1: [8, 9, 9, 9, 9, 9, 9], // 총 62개
            2: [8, 9, 9, 9, 9, 9, 9], // 총 62개
            3: [8, 9, 9, 9, 9, 9, 9], // 총 62개
          },
          11: {
            1: [9, 9, 9, 9, 9, 9, 10], // 총 64개
            2: [9, 9, 9, 9, 9, 9, 10], // 총 64개
            3: [9, 9, 9, 9, 9, 9, 10], // 총 64개
          },
          12: {
            1: [9, 9, 9, 9, 9, 10, 10], // 총 65개
            2: [9, 9, 9, 9, 9, 10, 10], // 총 65개
            3: [9, 9, 9, 9, 10, 10, 10], // 총 66개
          },
          13: {
            1: [9, 9, 9, 9, 10, 10, 10], // 총 66개
            2: [9, 9, 9, 9, 10, 10, 10], // 총 66개
            3: [9, 9, 9, 10, 10, 10, 10], // 총 67개
          },
          14: {
            1: [9, 9, 9, 9, 10, 10, 10], // 총 66개
            2: [9, 9, 9, 10, 10, 10, 10], // 총 67개
            3: [9, 9, 9, 10, 10, 10, 10], // 총 67개
          },
        },
      };

  /// 특정 주차, 요일의 운동 가져오기
  static DailyWorkout? getWorkoutForDay(UserLevel level, int week, int day) {
    final levelData = workoutPrograms[level];
    if (levelData == null) return null;

    final weekData = levelData[week];
    if (weekData == null) return null;

    final sets = weekData[day];
    if (sets == null) return null;

    return DailyWorkout(sets: sets);
  }

  /// 특정 주차의 총 횟수
  static int getTotalRepsForWeek(UserLevel level, int week) {
    final levelData = workoutPrograms[level];
    if (levelData == null) return 0;

    final weekData = levelData[week];
    if (weekData == null) return 0;

    int total = 0;
    for (var daySets in weekData.values) {
      total += daySets.fold(0, (sum, reps) => sum + reps);
    }
    return total;
  }
}
